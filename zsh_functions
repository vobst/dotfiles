# This function starts broot and executes the command
# it produces, if any.
# It's needed because some shell commands, like `cd`,
# have no useful effect if executed in a subshell.
function br {
    local cmd cmd_file code
    cmd_file=$(mktemp)
    if broot --outcmd "$cmd_file" "$@"; then
        cmd=$(<"$cmd_file")
        rm -f "$cmd_file"
        eval "$cmd"
    else
        code=$?
        rm -f "$cmd_file"
        return "$code"
    fi
}

# Check host OS
function is_linux() {
  uname | grep -i Linux &>/dev/null
}
function is_osx() {
  uname | grep -i Darwin &>/dev/null
}

# Proxy Settings
function assignProxy() {
  PROXY_ENV="http_proxy ftp_proxy https_proxy all_proxy "
  PROXY_ENV=$PROXY_ENV"HTTP_PROXY HTTPS_PROXY FTP_PROXY ALL_PROXY"
  for envar in $=PROXY_ENV
  do
    echo "Setting: $envar = $1"
    export $envar=$1
  done
  for envar in "no_proxy" "NO_PROXY"
  do
    echo "Setting: $envar = $2"
    export $envar=$2
  done
}

function clrProxy() {
  PROXY_ENV="http_proxy ftp_proxy https_proxy all_proxy "
  PROXY_ENV=$PROXY_ENV"HTTP_PROXY HTTPS_PROXY FTP_PROXY ALL_PROXY"
  for envar in $=PROXY_ENV
  do
    echo "Unsetting: $envar"
    unset $envar
  done
}

function pdfo() {
  chromium "file://$(pwd)/$1"
}
